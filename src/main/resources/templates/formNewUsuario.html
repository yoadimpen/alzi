<!doctype html>
<html>
    <head>
        <title>Alzi</title>
    </head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <body>
        <div class="contenedor">
            <div class="cuadro">
                <h1>Inicia sesión</h1>
                    <div class="modal-content" style="padding-top: 50px;padding-bottom: 50px;max-width: 400px;margin: 0 auto;">
                        <form class="col-12" th:action="@{crear-usuario}"
                            th:object="${usuario}" method="post">
                            <div class="form-group" id="roles-group">
                                <select th:field="*{roles}" name="roles" id="roles">
                                    <option th:value="'PARTICIPANTE'" th:text="Participante"></option>
                                    <option th:value="'CUIDADOR'" th:text="Cuidador"></option>
                                    <option th:value="'ESPECIALISTA'" th:text="Especialista"></option>
                                </select>
                                <p class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('roles')}" th:errors="*{roles}"></p>
                            </div>
                            <input type="hidden" th:field="*{id}" />
                            <div class="form-group" id="nombre-group">
                                <input th:field="*{nombre}" type="text" class="form-control"
                                    placeholder="Nombre" name="nombre" />
                                <p class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('nombre')}" th:errors="*{nombre}"></p>
                            </div>
                            <div class="form-group" id="apellidos-group">
                                <input th:field="*{apellidos}" type="text" class="form-control"
                                    placeholder="Apellidos" name="apellidos" />
                                <p class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('apellidos')}" th:errors="*{apellidos}"></p>
                            </div>
                            <div class="form-group" id="fechaNacimiento-group">
                                <input th:field="*{fechaNacimiento}" type="date" class="form-control" name="fechaNacimiento" />
                                <p class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('fechaNacimiento')}" th:errors="*{fechaNacimiento}"></p>
                            </div>
                            <div class="form-group" id="dni-group">
                                <input th:field="*{dni}" type="text" class="form-control"
                                    placeholder="DNI" name="dni" />
                                <p class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('dni')}" th:errors="*{dni}"></p>
                            </div>
                            <div class="form-group" id="pass-group">
                                <input th:field="*{pass}" type="text" class="form-control"
                                    placeholder="Contraseña" name="pass"/>
                                    <p class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('pass')}" th:errors="*{pass}"></p>
                            </div>
                            <div class="form-group" id="direccion-group">
                                <input th:field="*{direccion}" type="text" class="form-control"
                                    placeholder="Dirección" name="direccion" />
                                <p class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('direccion')}" th:errors="*{direccion}"></p>
                            </div>
                            <div class="form-group" id="telefono-group">
                                <input th:field="*{telefono}" type="text" class="form-control"
                                    placeholder="Teléfono" name="telefono" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1');"/>
                                <p class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('telefono')}" th:errors="*{telefono}"></p>
                            </div>
                            <div class="form-group" id="email-group">
                                <input th:field="*{email}" type="text" class="form-control"
                                    placeholder="Email" name="email" />
                                <p class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></p>
                            </div>
                            <div class="form-group" id="bio-group">
                                <input th:field="*{bio}" type="text" class="form-control"
                                    placeholder="Bio" name="bio" />
                                <p class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('bio')}" th:errors="*{bio}"></p>
                            </div>
                            <div class="form-group" id="PRelacionCuidador-group">
                                <input th:field="*{PRelacionCuidador}" type="text" class="form-control"
                                    placeholder="Relación con Cuidador" name="PRelacionCuidador" />
                                <p class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('PRelacionCuidador')}" th:errors="*{PRelacionCuidador}"></p>
                            </div>
                            <div class="form-group" id="CTipo-group">
                                <select th:field="*{CTipo}" name="CTipo">
                                    <option th:value="'INFORMAL'" th:text="Informal"></option>
                                    <option th:value="'FORMAL'" th:text="Formal"></option>
                                </select>
                                <p class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('CTipo')}" th:errors="*{CTipo}"></p>
                            </div>
                            <div class="form-group" id="EEspecialidad-group">
                                <input th:field="*{EEspecialidad}" type="text" class="form-control"
                                    placeholder="Especialidad" name="EEspecialidad"/>
                                <p class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('EEspecialidad')}" th:errors="*{EEspecialidad}"></p>
                            </div>
                            <div class="form-group" id="ECentro-group">
                                <input th:field="*{ECentro}" type="text" class="form-control"
                                    placeholder="Centro" name="ECentro"/>
                                <p class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('ECentro')}" th:errors="*{ECentro}"></p>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-sign-in-alt"></i> Registrar Usuario
                            </button>
                        </form>
                        <div class="col-12 forgot">
                            <a th:href="@{/login}">¿Ya tienes una cuenta?</a>
                        </div>
                    </div>
            </div>
        </div>
    </body>
    <script>
        $("#roles").change(function () {
            var selected_option = $('#roles').val();
            if (selected_option === 'PARTICIPANTE') {
                $('#PRelacionCuidador').show();
                $("#CTipo").hide();
                $("#EEspecialidad").hide();
                $("#ECentro").hide();
            }
            if (selected_option === 'CUIDADOR') {
                $('#CTipo').show();
                $("#PRelacionCuidador").hide();
                $("#EEspecialidad").hide();
                $("#ECentro").hide();
            }
            if (selected_option === 'ESPECIALISTA') {
                $('#EEspecialidad').show();
                $('#ECentro').show();
                $("#PRelacionCuidador").hide();
                $("#CTipo").hide();
            }
        })

        $("#roles").change();
    </script>
</html>